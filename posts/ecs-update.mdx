---
title: 阿里云ECS系统升级!
date: 2025-02-07
tags: ["阿里云"]
category: "建站"
description: 关于想在自己服务器上部署nextjs所做的操作。前段时间我重新拾起了好几个月没碰的服务器，想把个人项目从vercel部署迁移上自己的服务器上。没想到系统问题成了拦路虎。
---

## 前言

前段时间我重新拾起了好几个月没碰的服务器，想把个人项目从vercel部署迁移上自己的服务器上。一是让自己的项目更可控，二来也能让网站在国内访问。
再加上之前一直想体验一下宝塔这玩意，于是在服务器上安装了宝塔。兴高采烈得把原先的nginx服务删除了，然后在/www/wwwroot下新建了个文件夹，专门管理我的个人网站。

一开始我是现在本地run build完项目后，手动上传文件，然后修改宝塔上的nginx配置来运行，一切安好。

但当我起了要把项目使用NextJs来运行时，事情逐渐复杂起来。

## 问题一

第一个要解决的问题便是Nodejs版本问题，Nextjs的项目至少都要20以上的版本，而我之前买的服务器是CentOs7还是8，最高能支持的似乎只到18。所以我就想是不是得先升级自己的服务器。

然后我在网上查了些资料，发现CentOS已经不维护了，所以选择进行系统升级。
![](/images/20250207ecsUpdate/1.png)


## 问题二
![](/images/20250207ecsUpdate/2.png)
在我点击了系统升级后，我决定把系统迁移到`Alibaba Cloud Linux 3`。在迁移之前，阿里云会帮我检测我能否迁移到这个新系统。

首先给我的提示便是内存不够，我先是提升了我的CPU的配置（似乎没什么卵用）；然后在宝塔上操作了下清除内存，不知道起没起作用。

第二次检测时换了提示：当前实例安装有不支持的i386软件包: libstdc++ libgcc glibc nss-softokn-freeb。

然后我就才是让Cursor帮忙了。

登录上服务器，检查系统中是否安装了这些 32 位软件包
```bash
rpm -qa | grep '\.i686\|\.i386'
```
这将列出所有已安装的 32 位软件包

```bash
sudo yum remove libstdc++.i686 libgcc.i686 glibc.i686 nss-softokn-freebl.i686
```
先把我原来centos系统上的这几个软件给删了

然后进行系统升级，升级大概花了十几二十分钟吧。重新登录宝塔看下，终于可以愉快地部署我的Nextjs项目啦！

![](/images/20250207ecsUpdate/3.png)

