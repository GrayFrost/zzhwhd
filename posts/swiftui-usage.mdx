---
title: SwiftUI的使用总结
date: '2025-03-11'
tags: ['swift', 'cocoapods']
---

年前使用cursor帮我构建了一个MacOS应用，这个应用的主要功能是用来在Mac电脑上看漫画（也可以说是看图片）。
最大的亮点就是能够直接打开一个压缩包或者文件夹，因为mac上浏览图片时总要一张张点开，要么就是多选后点击打开，体验非常差。所以就自己弄了这么一个玩意。

当时选择的是SwiftUI来完成整个APP的开发，也算是边做边学，现在记录下自己大概掌握了哪些知识。

## 目录
初始是打开XCode，选择macOS -> Application分类下的App，然后起个项目名称，我的是manga，其他都默认下一步。

![](/images/20250311swiftuiUsage/1.png)

可以看到，目录非常简洁，而且如果我们不需要测试，完全可以把另外两个tests测试相关的目录给删了。
我们的项目代码则集中存放在和项目同名的目录下。

## 协议
一个项目肯定会有一个主入口，这里swiftUI默认的一个入口文件名是"项目名App"的格式，比如我的项目名是manga，那我就去找mangaApp.swift的文件。

```swift
import SwiftUI

@main
struct mangaApp: App { 
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}
```
文件内容大概如上，这里有个`@main`，这是swiftui的一种协议，用来标记应用程序的入口。

然后我们打开ContentView.swift文件：

```swift
import SwiftUI

struct ContentView: View {
    var body: some View {
        VStack {
            Image(systemName: "globe")
                .imageScale(.large)
                .foregroundStyle(.tint)
            Text("Hello, world!")
        }
        .padding()
    }
}

#Preview {
    ContentView()
}
```

下面我会列出我在开发时遇到的协议。

### Identifiable
我的理解是用来标识唯一性，常见于列表内容中的列表项的渲染

### Hashable
Swift中可以使用自定义的类型作为合集的值或者字典的key，只需要遵循Hashable协议

### View
用来定义UI组件的布局与行为


## 预览
目前接触了两种添加预览的方式。
最新的写法是使用`#Preview`：
```swift
#Preview {
    ContentView(appState: AppState())
}
```

之前则是使用`PreviewProvider`：
```swift
struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
```

## 安装包管理

比如web前端的资源管理使用npm、java应用使用maven等，那ios应用的资源管理使用什么呢？
通常有两种：`Cocoapods`和`Swift Package Manager`。

`Cocoapods`的使用之前我已经简单记录了，至于`Swift Package Manager`，简称`SPM`，我使用的时候由于网络等一系列问题，导致下载一个包都非常的慢。  
所以我在使用了一两天后，重新切换回了`Cocoapods`。

## 数据管理

- `@State`用于声明视图的局部状态
- `@Binding`用于在父视图和子视图之间共享和双向绑定状态。子视图通过`@Binding`访问和修改父视图的状态，而不创建自己的状态副本。
- `@StateObject`用于管理符合`ObservableObject`协议的类对象
- `@ObservedObject`用于引用外部传入的`ObservableObject`对象，视图会观察对象的变化并更新。与`@StateObject`不同的是，`@ObservedObject`不持有对象，只是监视它。
- `@EnvironmentObject`是一种全局的共享数据方式，允许跨多个视图层次结构传递`ObservableObject`，并自动更新所有依赖此对象的视图。
- `@Environment`用于读取环境中的值，SwiftUI提供了许多预定义的环境值。


## 扩展



## 图标
Assets目录

## 存储
实体Entity

修改应用名称